<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>TIL 2 - Thejazeto Lhousa</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="jq command
A command to manipulate json files. At work we usually have a bunch json serialized ouputs in S3 or some other datastore, which are absurdly many lines long and deeply nested. Often, if I need to grep something out of it, I&rsquo;ll just copy and paste it to a company internal json prettifier to make it human readable and get what I need. There must be some out on the web too. Something like this."><meta property="og:image" content><meta property="og:url" content="/posts/til-2/"><meta property="og:site_name" content="Thejazeto Lhousa"><meta property="og:title" content="TIL 2"><meta property="og:description" content="jq command A command to manipulate json files. At work we usually have a bunch json serialized ouputs in S3 or some other datastore, which are absurdly many lines long and deeply nested. Often, if I need to grep something out of it, I’ll just copy and paste it to a company internal json prettifier to make it human readable and get what I need. There must be some out on the web too. Something like this."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-25T12:17:43+05:30"><meta property="article:modified_time" content="2021-09-25T12:17:43+05:30"><meta property="article:tag" content="Til"><meta name=twitter:card content="summary"><meta name=twitter:title content="TIL 2"><meta name=twitter:description content="jq command A command to manipulate json files. At work we usually have a bunch json serialized ouputs in S3 or some other datastore, which are absurdly many lines long and deeply nested. Often, if I need to grep something out of it, I’ll just copy and paste it to a company internal json prettifier to make it human readable and get what I need. There must be some out on the web too. Something like this."><script src=/js/feather.min.js></script><link href=/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/main.5cebd7d4fb2b97856af8d32a6def16164fcf7d844e98e236fcb3559655020373.css><link id=darkModeStyle rel=stylesheet type=text/css href=/css/dark.d22e2a2879d933a4b781535fc4c4c716e9f9d35ea4986dd0cbabda82effc4bdd.css media="(prefers-color-scheme: dark)"><link rel=stylesheet type=text/css href=/css/syntax.307ea28af3c792131fb03d0ccf1cc452b9bc56819282ddb250ec854b7fe6c459.css></head><body><div class=content><header><div class=main><a href=/>Thejazeto Lhousa</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a></nav></header><main><article><div class=title><h1 class=title>TIL 2</h1><div class=meta>Posted on Sep 25, 2021</div></div><section class=body><h2 id=jq-command><code>jq</code> command</h2><p>A command to manipulate json files. At work we usually have a bunch json serialized ouputs in S3 or some other datastore, which are absurdly many lines long and deeply nested. Often, if I need to grep something out of it, I&rsquo;ll just copy and paste it to a company internal json prettifier to make it human readable and get what I need. There must be some out on the web too. Something like <a href=https://codebeautify.org/jsonviewer>this</a>.</p><p>It&rsquo;s a hassle when you need to switch multiple windows, download files, copy paste content, etc. Now come &lsquo;jq&rsquo;, a command line utility to, hopefully, end all that.</p><p>Download(on mac): <code>brew install jq</code></p><p>Print full json:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.&#39;</span> your_file.json
</span></span></code></pre></div><p>Print a level-1 keys value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.your_key&#39;</span> your_file.json
</span></span></code></pre></div><p>Print a level-2 keys value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.your_key.your_sub_key&#39;</span> your_file.json   <span style=color:#75715e># and so on</span>
</span></span></code></pre></div><p>Print an array element (0 indexed):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[4]&#39;</span> your_file.json     <span style=color:#75715e># index 4 is the 5th element in a 0 indexed array</span>
</span></span></code></pre></div><p>Print a range of array elements:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[2:6]&#39;</span> your_file.json   <span style=color:#75715e># prints index 2 up until 5</span>
</span></span></code></pre></div><p>Print range without bound:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[2:&#39;</span><span style=color:#f92672>]</span> your_file.json    <span style=color:#75715e># prints index 2 till the last</span>
</span></span></code></pre></div><p>Print range from the right end:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[-3:]&#39;</span> your_file.json   <span style=color:#75715e># prints the last 3 elements</span>
</span></span></code></pre></div><p>Print key of an array element:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[4].key&#39;</span> your_file.json <span style=color:#75715e># prints the index 4&#39;s key</span>
</span></span></code></pre></div><p>Print for all array elements key:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&gt;&gt; jq <span style=color:#e6db74>&#39;.[].key&#39;</span> your_file.json  <span style=color:#75715e># for all elements in array having &#39;key&#39;, all its values will get printed</span>
</span></span></code></pre></div><p>There so much more power in <code>jq</code>, feel free to explore.</p><h3 id=references>References:</h3><ul><li><a href=https://earthly.dev/blog/jq-select/>https://earthly.dev/blog/jq-select/</a></li><li><a href=https://www.baeldung.com/linux/jq-command-json>https://www.baeldung.com/linux/jq-command-json</a></li></ul></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/til>til</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/zetolhousa rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://twitter.com/thejazeto/ rel=me title=Twitter><i data-feather=twitter></i></a>
<a class=border></a><a class=soc href=https://www.linkedin.com/in/thejazeto/ rel=me title=LinkedIn><i data-feather=linkedin></i></a>
<a class=border></a></div><div class=footer-info>2024 ©thejazeto | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEHSFWY6K9"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KEHSFWY6K9")}</script><script>feather.replace()</script></div></body></html>